import{W as N}from"./CYY_Mbtd.js";import{_ as F,r as u,c as f,o as c,a as l,e as W,b as m,n as v,f as g,t as i,g as C,h as I,i as b,j as S,F as y,k as B,l as M}from"./DWJ3Xhpq.js";import p from"./Dm-g3vL9.js";import{u as O}from"./DZb62909.js";const $={class:"absolute inset-0 backface-hidden flex flex-col items-center justify-center bg-white dark:bg-gray-800 rounded-xl"},J={class:"dark:text-gray-100 text-2xl font-bold text-center"},z={class:"dark:text-gray-300 text-center"},T={class:"absolute inset-0 rotate-y-180 backface-hidden flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-700 rounded-xl"},R={class:"dark:text-gray-100"},V={class:"dark:text-gray-300 text-sm p-3"},_={__name:"WordCard",props:{word:Object},emits:["toggle-favorite"],setup(e){const s=u(!1);return(o,t)=>(c(),f("div",{class:"w-full h-48 perspective-[1000px] xl:h-60",onClick:t[1]||(t[1]=n=>s.value=!s.value)},[l("div",{class:v(["relative w-full h-full duration-500 preserve-3d rounded-xl outline-2",s.value?"rotate-y-180":"",{"outline-blue-500":e.word.jlpt==="N5","outline-green-500":e.word.jlpt==="N4","outline-yellow-500":e.word.jlpt==="N3","outline-orange-600":e.word.jlpt==="N2","outline-red-700":e.word.jlpt==="N1"}])},[l("div",$,[l("button",{onClick:t[0]||(t[0]=W(n=>o.$emit("toggle-favorite",e.word),["stop"])),class:"absolute top-4 start-4 cursor-pointer"},[m(g(p),{name:"i-uis:star",class:v(["absolute hover:text-yellow-400 text-3xl z-50",e.word.isFavorite?"text-yellow-400":"text-transparent"])},null,8,["class"]),m(g(p),{name:"i-uil:star",class:"absolute text-yellow-400 text-3xl"})]),l("p",{class:v(["font-bold absolute top-5 end-5",{"text-blue-500":e.word.jlpt==="N5","text-green-500":e.word.jlpt==="N4","text-yellow-500":e.word.jlpt==="N3","text-orange-600":e.word.jlpt==="N2","text-red-700":e.word.jlpt==="N1"}])},i(e.word.jlpt),3),l("p",J,i(e.word.word),1),l("p",z,i(e.word.kana),1)]),l("div",T,[l("p",R,i(e.word.meaning_zh),1),l("p",V,i(e.word.examples[0]),1)])],2)]))}},D=F(_,[["__scopeId","data-v-60bd0821"]]);function E(e,s={}){const o=u(null);let t=null;return C(()=>{t=new IntersectionObserver(n=>{const d=n[0];d.isIntersecting&&e&&e(d)}),o.value&&t.observe(o.value)}),I(()=>{o.value&&t&&(t.unobserve(o.value),t.disconnect())}),{target:o}}const L={class:"grid grid-cols-2 gap-4 mt-4 xl:grid-cols-5 xl:gap-6 xl:mt-6"},H={__name:"index",setup(e){const s=O(),o=u([]);{const r=JSON.parse(localStorage.getItem("favoriteWords")||"[]");o.value=N.map(a=>({...a,isFavorite:r.includes(a.word)}))}const t=u(15),n=b(()=>{const r=s.category;return r==="all"?o.value:r==="favorite"?o.value.filter(a=>a.isFavorite):o.value.filter(a=>a.jlpt===r)}),d=b(()=>n.value.slice(0,t.value));function h(r){r.isFavorite=!r.isFavorite,j()}function j(){const r=o.value.filter(a=>a.isFavorite).map(a=>a.word);localStorage.setItem("favoriteWords",JSON.stringify(r))}function x(){t.value<n.value.length&&(t.value+=10)}S(()=>s.category,()=>{window.scrollTo({top:0,behavior:"smooth"}),t.value=10,x()});const{target:k}=E(()=>{x()});return(r,a)=>(c(),f(y,null,[l("div",L,[(c(!0),f(y,null,B(g(d),w=>(c(),M(D,{key:w.word,word:w,onToggleFavorite:h},null,8,["word"]))),128))]),l("div",{ref_key:"loadMoreRef",ref:k,class:"h-10"},null,512)],64))}};export{H as default};
