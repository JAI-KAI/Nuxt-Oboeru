import{W as k}from"./CYY_Mbtd.js";import N from"./IX5bNAZ3.js";import{f as x,r as c,c as f,o as u,g as v,a as s,n as p,h as F,b as w,t as i,_ as W,i as C,j as I,k as y,l as S,F as b,m as B,p as M}from"./ial-GWOR.js";import{u as $}from"./DG4bm-hw.js";const J={class:"absolute inset-0 backface-hidden flex flex-col items-center justify-center bg-white dark:bg-gray-800 rounded-xl"},O={class:"dark:text-gray-100 text-2xl font-bold text-center"},z={class:"dark:text-gray-300 text-center"},T={class:"absolute inset-0 rotate-y-180 backface-hidden flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-700 rounded-xl"},R={class:"dark:text-gray-100"},V={class:"dark:text-gray-300 text-sm p-3"},D=x({__name:"WordCard",props:{word:{}},emits:["toggle-favorite"],setup(d){const a=c(!1);return(e,t)=>{const l=N;return u(),f("div",{class:"w-full h-48 perspective-[1000px] xl:h-60",onClick:t[1]||(t[1]=n=>a.value=!v(a))},[s("div",{class:p(["relative w-full h-full duration-500 preserve-3d rounded-xl outline-2",{"rotate-y-180":v(a),"outline-blue-500":e.word.jlpt==="N5","outline-green-500":e.word.jlpt==="N4","outline-yellow-500":e.word.jlpt==="N3","outline-orange-600":e.word.jlpt==="N2","outline-red-700":e.word.jlpt==="N1"}])},[s("div",J,[s("button",{onClick:t[0]||(t[0]=F(n=>e.$emit("toggle-favorite",e.word),["stop"])),class:"absolute top-4 start-4 cursor-pointer"},[w(l,{name:"i-uis:star",class:p(["absolute hover:text-yellow-400 text-3xl z-50",e.word.isFavorite?"text-yellow-400":"text-transparent"])},null,8,["class"]),w(l,{name:"i-uil:star",class:"absolute text-yellow-400 text-3xl"})]),s("p",{class:p(["font-bold absolute top-5 end-5",{"text-blue-500":e.word.jlpt==="N5","text-green-500":e.word.jlpt==="N4","text-yellow-500":e.word.jlpt==="N3","text-orange-600":e.word.jlpt==="N2","text-red-700":e.word.jlpt==="N1"}])},i(e.word.jlpt),3),s("p",O,i(e.word.word),1),s("p",z,i(e.word.kana),1)]),s("div",T,[s("p",R,i(e.word.meaning_zh),1),s("p",V,i(e.word.examples[0]),1)])],2)])}}}),E=W(D,[["__scopeId","data-v-2458f650"]]);function L(d,a={}){const e=c(null);let t=null;return C(()=>{t=new IntersectionObserver(l=>{const n=l[0];n.isIntersecting&&d&&d(n)}),e.value&&t.observe(e.value)}),I(()=>{e.value&&t&&(t.unobserve(e.value),t.disconnect())}),{target:e}}const U={class:"grid grid-cols-2 gap-4 mt-4 xl:grid-cols-5 xl:gap-6 xl:mt-6"},K=x({__name:"index",setup(d){const a=$(),e=c([]);{const o=JSON.parse(localStorage.getItem("favoriteWords")||"[]");e.value=k.map(r=>({...r,isFavorite:o.includes(r.word)}))}const t=c(15),l=y(()=>{const o=a.category;return o==="all"?e.value:o==="favorite"?e.value.filter(r=>r.isFavorite):e.value.filter(r=>r.jlpt===o)}),n=y(()=>l.value.slice(0,t.value));function _(o){o.isFavorite=!o.isFavorite,h()}function h(){const o=e.value.filter(r=>r.isFavorite).map(r=>r.word);localStorage.setItem("favoriteWords",JSON.stringify(o))}function g(){t.value<l.value.length&&(t.value+=10)}S(()=>a.category,()=>{window.scrollTo({top:0,behavior:"smooth"}),t.value=10,g()});const{target:j}=L(()=>{g()});return(o,r)=>(u(),f(b,null,[s("div",U,[(u(!0),f(b,null,B(v(n),m=>(u(),M(E,{key:m.word,word:m,onToggleFavorite:_},null,8,["word"]))),128))]),s("div",{ref_key:"loadMoreRef",ref:j,class:"h-10"},null,512)],64))}});export{K as default};
