import{f as j,z,r as m,q as W,c as u,j as x,y as _,i as e,a as o,t as i,b as C,w as I,T as R,F as q,s as B,o as d,n as h,A as J,B as O,k as F}from"./DmCCFthr.js";import{u as M}from"./vGiNDWee.js";const T={class:"text-center flex flex-col mt-10"},V={class:"text-lg"},A={key:0,class:"mx-auto"},D={class:"flex flex-col justify-center items-center px-6"},K={class:"text-2xl font-bold"},L={key:1,class:"text-lg"},E={class:"font-bold"},U={class:"grid grid-cols-2 gap-4 mt-4 xl:grid-cols-5 xl:gap-6 xl:mt-6"},G={class:"absolute inset-0 flex flex-col justify-center items-center px-6"},H={class:"text-2xl"},P={class:"font-bold"},$=j({__name:"[jlpt]",setup(Q){const{words:N}=M(),t=z().params.jlpt,y=N.value.filter(r=>r.jlpt==t),s=S(y,10),n=m(0),c=m(""),g=m([]),p=W(()=>Math.round((s.length-g.value.length)/s.length*100));let a;const b={mounted:r=>r.focus()};a=JSON.parse(localStorage.getItem("records")||"[]");function S(r,l){return[...r].sort(()=>Math.random()-.5).slice(0,l)}function v(r){return r.trim().toLowerCase()}function w(){n.value<s.length&&(v(s[n.value].kana)!==v(c.value)&&g.value.push(s[n.value]),c.value="",n.value+=1),n.value==s.length&&k()}function k(){JSON.parse(localStorage.getItem("records")||"[]").length<10?(a.push({jlpt:t,score:p.value}),localStorage.setItem("records",JSON.stringify(a))):(a.shift(),a.push({jlpt:t,score:p.value}),localStorage.setItem("records",JSON.stringify(a)))}return(r,l)=>(d(),u("div",T,[x(o("div",V,[o("h2",null,"歡迎來到 "+i(e(t))+" 測驗，本測驗共有 "+i(e(s).length)+" 題",1),l[1]||(l[1]=o("h2",null,"請輸入正確平假名",-1))],512),[[_,e(n)<e(s).length]]),e(n)<e(s).length?(d(),u("div",A,[C(R,{name:"quiz"},{default:I(()=>[(d(),u("div",{key:e(n),class:h(["w-full max-w-50 h-48 mt-10 flex items-center transition shadow-lg rounded-xl outline-2",{"outline-blue-500":e(t)==="N5","outline-green-500":e(t)==="N4","outline-yellow-500":e(t)==="N3","outline-orange-600":e(t)==="N2","outline-red-700":e(t)==="N1"}])},[o("div",D,[o("p",K,i(e(s)[e(n)].word),1),x(o("input",{onKeydown:O(w,["enter"]),"onUpdate:modelValue":l[0]||(l[0]=f=>J(c)?c.value=f:null),type:"text",class:h(["mt-10 w-full px-3 py-2 rounded-md border focus:outline",{"focus:outline-blue-300":e(t)==="N5","focus:outline-green-300":e(t)==="N4","focus:outline-yellow-300":e(t)==="N3","focus:outline-orange-300":e(t)==="N2","focus:outline-red-500":e(t)==="N1"}])},null,34),[[F,e(c)],[b]])])],2))]),_:1}),o("button",{onClick:w,class:"mt-10 px-6 py-3 rounded-md cursor-pointer text-white font-bold bg-cyan-700 shadow-lg transition hover:bg-cyan-500 hover:shadow-cyan-500/50"}," 下一題 ")])):(d(),u("div",L,[l[3]||(l[3]=o("p",null,"恭喜完成測驗",-1)),o("p",E,"總分: "+i(e(p)),1),x(o("div",null,[l[2]||(l[2]=o("p",null,"以下為回答錯誤單字",-1)),o("div",U,[(d(!0),u(q,null,B(e(g),f=>(d(),u("div",{class:h(["w-full max-w-50 h-48 mt-5 mx-auto shadow-lg relative rounded-xl outline-2",{"outline-blue-500":e(t)==="N5","outline-green-500":e(t)==="N4","outline-yellow-500":e(t)==="N3","outline-orange-600":e(t)==="N2","outline-red-700":e(t)==="N1"}])},[o("div",G,[o("p",H,i(f.word),1),o("p",P,i(f.kana),1)])],2))),256))])],512),[[_,e(p)!==100]])]))]))}});export{$ as default};
