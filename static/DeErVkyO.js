import{f as h,r as g,g as j,c as y,h as E,i as r,o as v,a as e,t as f,j as m,v as S,k as c,n as W,l as N,b as w,_ as A,m as G,p as H,q as $,F as M,s as K,x as Q,y as X}from"./DmCCFthr.js";import{u as T,a as Y}from"./cUka71tE.js";import Z from"./CDM6_kjT.js";import{u as ee}from"./vGiNDWee.js";const te={key:0,class:"fixed top-1/2 left-1/2 z-50 text-center bg-white dark:bg-gray-700 transform -translate-x-1/2 -translate-y-1/2 p-6 lg:p-16 rounded shadow-lg"},oe={class:"flex justify-center gap-2 mt-4 lg:gap-6"},re={key:1,class:"fixed top-1/2 left-1/2 z-50 text-center bg-white dark:bg-gray-700 transform -translate-x-1/2 -translate-y-1/2 p-6 lg:p-16 rounded shadow-lg"},le={action:""},ne={class:"flex flex-col gap-2 mt-4"},ae={class:"flex justify-center gap-2 mt-4 lg:gap-6"},se={key:2,class:"fixed top-1/2 left-1/2 z-50 text-center bg-white dark:bg-gray-700 transform -translate-x-1/2 -translate-y-1/2 p-6 lg:p-16 rounded shadow-lg"},de={action:""},ie={class:"flex flex-col gap-2 mt-4"},pe={class:"flex justify-center gap-2 mt-4 lg:gap-6"},ue=h({__name:"ConfirmModal",props:{deleteWord:{},updateWord:{},createWord:{}},emits:["confirmDelete","confirmCreate","confirmUpdate","cancel"],setup(x){const u=T(),o=x,i=g({...o.deleteWord}),d=g({...o.updateWord}),n=g({...o.createWord});return j(()=>o.deleteWord,a=>{i.value={...a}}),j(()=>o.updateWord,a=>{d.value={...a}}),j(()=>o.createWord,a=>{n.value={...a}}),(a,t)=>r(u).modalType=="delete"?(v(),y("div",te,[e("p",null,"確定刪除 "+f(r(i).jlpt)+"單字「"+f(r(i).word)+"」嗎",1),e("div",oe,[e("button",{onClick:t[0]||(t[0]=l=>a.$emit("confirmDelete")),class:"px-3 py-1 bg-red-500 text-white rounded"},"是"),e("button",{onClick:t[1]||(t[1]=l=>a.$emit("cancel")),class:"px-3 py-1 bg-gray-300 text-black rounded"},"否")])])):r(u).modalType=="update"?(v(),y("div",re,[t[17]||(t[17]=e("p",null,"編輯單字",-1)),e("form",le,[e("div",ne,[m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>r(d).jlpt=l),name:"JLPT",class:"p-2 border rounded dark:bg-gray-700"},t[16]||(t[16]=[e("option",null,"N1",-1),e("option",null,"N2",-1),e("option",null,"N3",-1),e("option",null,"N4",-1),e("option",null,"N5",-1)]),512),[[S,r(d).jlpt]]),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>r(d).word=l),type:"text",placeholder:"單字",class:"p-2 border rounded"},null,512),[[c,r(d).word]]),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>r(d).kana=l),type:"text",placeholder:"假名",class:"p-2 border rounded"},null,512),[[c,r(d).kana]]),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>r(d).meaning_zh=l),type:"text",placeholder:"中文意思",class:"p-2 border rounded"},null,512),[[c,r(d).meaning_zh]]),m(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=l=>r(d).examples[0]=l),type:"text",placeholder:"例句",class:"p-2 border rounded"},"                ",512),[[c,r(d).examples[0]]])])]),e("div",ae,[e("button",{onClick:t[7]||(t[7]=l=>a.$emit("confirmUpdate",r(d))),class:"px-3 py-1 bg-red-500 text-white rounded"},"是"),e("button",{onClick:t[8]||(t[8]=l=>a.$emit("cancel")),class:"px-3 py-1 bg-gray-300 text-black rounded"},"否")])])):r(u).modalType=="create"?(v(),y("div",se,[t[19]||(t[19]=e("p",null,"新增單字",-1)),e("form",de,[e("div",ie,[m(e("select",{"onUpdate:modelValue":t[9]||(t[9]=l=>r(n).jlpt=l),name:"JLPT",class:"p-2 border rounded dark:bg-gray-700"},t[18]||(t[18]=[e("option",null,"JLPT Level",-1),e("option",null,"N1",-1),e("option",null,"N2",-1),e("option",null,"N3",-1),e("option",null,"N4",-1),e("option",null,"N5",-1)]),512),[[S,r(n).jlpt]]),m(e("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>r(n).word=l),type:"text",placeholder:"單字",class:"p-2 border rounded"},null,512),[[c,r(n).word]]),m(e("input",{"onUpdate:modelValue":t[11]||(t[11]=l=>r(n).kana=l),type:"text",placeholder:"假名",class:"p-2 border rounded"},null,512),[[c,r(n).kana]]),m(e("input",{"onUpdate:modelValue":t[12]||(t[12]=l=>r(n).meaning_zh=l),type:"text",placeholder:"中文意思",class:"p-2 border rounded"},null,512),[[c,r(n).meaning_zh]]),m(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=l=>r(n).examples[0]=l),type:"text",placeholder:"例句",class:"p-2 border rounded"},"                ",512),[[c,r(n).examples[0]]])])]),e("div",pe,[e("button",{onClick:t[14]||(t[14]=l=>a.$emit("confirmCreate",r(n))),class:"px-3 py-1 bg-red-500 text-white rounded"},"是"),e("button",{onClick:t[15]||(t[15]=l=>a.$emit("cancel")),class:"px-3 py-1 bg-gray-300 text-black rounded"},"否")])])):E("",!0)}}),me={class:"absolute inset-0 backface-hidden flex flex-col items-center justify-center bg-white dark:bg-gray-800 rounded-xl"},ge={class:"dark:text-gray-100 text-2xl font-bold text-center"},ce={class:"dark:text-gray-300 text-center"},fe={class:"absolute inset-0 rotate-y-180 backface-hidden flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-700 rounded-xl"},ve={class:"dark:text-gray-100"},xe={class:"dark:text-gray-300 text-sm p-3"},ye=h({__name:"WordCard",props:{word:{}},emits:["toggle-favorite","request-delete","request-updateWord"],setup(x){const u=g(!1);return(o,i)=>{const d=Z;return v(),y("div",{class:"w-full h-48 perspective-[1000px] xl:h-60",onClick:i[3]||(i[3]=n=>u.value=!r(u))},[e("div",{class:W(["relative w-full h-full duration-500 preserve-3d rounded-xl outline-2",{"rotate-y-180":r(u),"outline-blue-500":o.word.jlpt==="N5","outline-green-500":o.word.jlpt==="N4","outline-yellow-500":o.word.jlpt==="N3","outline-orange-600":o.word.jlpt==="N2","outline-red-700":o.word.jlpt==="N1"}])},[e("div",me,[e("button",{onClick:i[0]||(i[0]=N(n=>o.$emit("toggle-favorite",o.word),["stop"])),class:"absolute top-4 start-4 cursor-pointer"},[w(d,{name:"i-uis:star",class:W(["absolute hover:text-yellow-400 text-3xl",[o.word.isFavorite?"text-yellow-400":"text-transparent",r(u)?"z-0":"z-50"]])},null,8,["class"]),w(d,{name:"i-uil:star",class:"absolute text-yellow-400 text-3xl"})]),e("p",{class:W(["font-bold absolute top-5 end-5",{"text-blue-500":o.word.jlpt==="N5","text-green-500":o.word.jlpt==="N4","text-yellow-500":o.word.jlpt==="N3","text-orange-600":o.word.jlpt==="N2","text-red-700":o.word.jlpt==="N1"}])},f(o.word.jlpt),3),e("p",ge,f(o.word.word),1),e("p",ce,f(o.word.kana),1)]),e("div",fe,[e("button",{onClick:i[1]||(i[1]=N(n=>o.$emit("request-updateWord",o.word),["stop"])),class:"absolute top-4 start-4 cursor-pointer"},[w(d,{name:"i-mage:edit-pen",class:"absolute hover:text-blue-300 text-xl lg:text-3xl z-50"})]),e("button",{onClick:i[2]||(i[2]=N(n=>o.$emit("request-delete",o.word),["stop"])),class:"absolute top-4 end-10 cursor-pointer"},[w(d,{name:"i-line-md:trash",class:W(["absolute hover:text-red-400 text-xl lg:text-3xl",r(u)?"z-50":"z-0"])},null,8,["class"])]),e("p",ve,f(o.word.meaning_zh),1),e("p",xe,f(o.word.examples[0]),1)])],2)])}}}),we=A(ye,[["__scopeId","data-v-df84562e"]]);function be(x,u={}){const o=g(null);let i=null;return G(()=>{i=new IntersectionObserver(d=>{const n=d[0];n.isIntersecting&&x&&x(n)}),o.value&&i.observe(o.value)}),H(()=>{o.value&&i&&(i.unobserve(o.value),i.disconnect())}),{target:o}}const ke={class:"grid grid-cols-2 gap-4 mt-4 xl:grid-cols-5 xl:gap-6 xl:mt-6"},$e=h({__name:"index",setup(x){const{words:u,createWords:o,updateWords:i,deleteWords:d}=ee(),n=Y(),a=T(),t=g({id:"",jlpt:"",word:"",kana:"",meaning_zh:"",examples:[""],isFavorite:!1}),l=g({jlpt:"",word:"",kana:"",meaning_zh:"",examples:[""]}),C=g({jlpt:"JLPT Level",word:"",kana:"",meaning_zh:"",examples:[""]}),b=$(()=>{if(!u.value)return[];const s=JSON.parse(localStorage.getItem("favoriteWords")||"[]");return u.value.map(p=>({...p,isFavorite:s.includes(p.word)}))}),k=g(15),z=$(()=>{const s=n.category;return s==="all"?b.value:s==="favorite"?b.value.filter(p=>p.isFavorite):b.value.filter(p=>p.jlpt===s)}),F=$(()=>z.value.toReversed().slice(0,k.value));function J(s){s.isFavorite=!s.isFavorite,V()}function V(){const s=b.value.filter(p=>p.isFavorite).map(p=>p.word);localStorage.setItem("favoriteWords",JSON.stringify(s))}function U(){k.value<z.value.length&&(k.value+=10)}j(()=>n.category,()=>{window.scrollTo({top:0,behavior:"smooth"}),k.value=10,U()});const{target:D}=be(()=>{U()}),L=()=>{a.modalOff(),t.value={id:"",jlpt:"",word:"",kana:"",meaning_zh:"",examples:[""],isFavorite:!1},l.value={jlpt:"",word:"",kana:"",meaning_zh:"",examples:[""]},C.value={jlpt:"JLPT Level",word:"",kana:"",meaning_zh:"",examples:[""]}},q=s=>{a.modalOn(),a.toggleType("delete"),t.value=JSON.parse(JSON.stringify(s))},I=async()=>{try{await d(t.value.id),a.modalOff()}catch(s){console.error("Error deleting word:",s)}},_=s=>{l.value=JSON.parse(JSON.stringify(s)),a.modalOn(),a.toggleType("update")},B=async s=>{try{await i(s.id,s),a.modalOff(),l.value={jlpt:"",word:"",kana:"",meaning_zh:"",examples:[""]}}catch(p){console.error("Error updating word:",p)}},P=async s=>{try{await o(s),a.modalOff(),C.value={jlpt:"",word:"",kana:"",meaning_zh:"",examples:[""]}}catch(p){console.error("Error creating word:",p)}};return(s,p)=>{const R=ue;return v(),y(M,null,[e("div",ke,[(v(!0),y(M,null,K(r(F),O=>(v(),Q(we,{key:O.id,word:O,onToggleFavorite:J,onRequestDelete:q,onRequestUpdateWord:_},null,8,["word"]))),128))]),m(w(R,{deleteWord:r(t),updateWord:r(l),createWord:r(C),onConfirmDelete:I,onConfirmCreate:P,onConfirmUpdate:B,onCancel:L},null,8,["deleteWord","updateWord","createWord"]),[[X,r(a).isModalOpen]]),e("div",{ref_key:"loadMoreRef",ref:D,class:"h-10"},null,512)],64)}}});export{$e as default};
